openapi: 3.0.3
info:
  title: 칸반보드 API
  version: 1.0.0
  description: |
    프로젝트 관리, 카드 추적, 조직 관리 기능을 제공하는 칸반보드 RESTful API입니다.

    ## 인증 방법
    이 API는 두 가지 인증 방법을 지원합니다:
    1. **API 키 인증**: `Authorization: Bearer sk_live_...` 헤더 사용
    2. **세션 인증**: NextAuth를 통한 쿠키 기반 인증

    ## API 키 관리
    - API 키는 웹 인터페이스의 `/settings/api-keys` 에서 생성할 수 있습니다
    - 키 형식은 AWS 스타일입니다: `sk_live_...` (프로덕션) 또는 `sk_test_...` (테스트)
    - 키는 SHA-256으로 해시되어 저장되며 평문으로 저장되지 않습니다

    ## 속도 제한
    현재 속도 제한은 적용되지 않으나, 향후 버전에서 추가될 수 있습니다.

    ## 기본 사용법
    모든 요청은 JSON 형식이며, 응답도 JSON으로 반환됩니다.
    인증이 필요한 엔드포인트는 API 키 또는 세션 쿠키를 포함해야 합니다.

  contact:
    name: API 지원
    email: support@example.com
  license:
    name: MIT

servers:
  - url: http://localhost:3000/api/v1
    description: 개발 서버
  - url: https://your-domain.com/api/v1
    description: 프로덕션 서버

tags:
  - name: Projects
    description: 프로젝트 관리 - 프로젝트 생성, 조회, 수정, 멤버 관리 등의 작업을 수행합니다
  - name: Cards
    description: 카드(작업) 관리 - 카드 생성, 수정, 삭제, 이동 등 작업 항목을 관리합니다
  - name: Organizations
    description: 조직 관리 - 조직 생성, 멤버 관리, 권한 설정 등을 수행합니다
  - name: API Keys
    description: API 키 관리 - API 키 생성, 조회, 삭제 (세션 인증 필요)
  - name: Milestones
    description: 마일스톤 관리 - 프로젝트의 마일스톤(목표 시점)을 생성하고 관리합니다
  - name: Labels
    description: 라벨 관리 - 카드 분류를 위한 라벨을 생성하고 관리합니다
  - name: Columns
    description: 컬럼 관리 - 칸반 보드의 컬럼(상태)을 관리합니다
  - name: Users
    description: 사용자 관리 - 사용자 검색 및 초대 기능을 제공합니다

components:
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API Key
      description: "API key authentication using Bearer token (e.g., Authorization: Bearer sk_live_...)"

    SessionAuth:
      type: apiKey
      in: cookie
      name: next-auth.session-token
      description: "Session-based authentication via NextAuth cookies"

  schemas:
    Error:
      type: object
      required:
        - error
        - meta
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              enum: [UNAUTHORIZED, FORBIDDEN, NOT_FOUND, VALIDATION_ERROR, INTERNAL_ERROR, INVALID_INPUT]
            message:
              type: string
            details:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  message:
                    type: string
        meta:
          $ref: '#/components/schemas/Meta'

    Meta:
      type: object
      required:
        - requestId
        - timestamp
      properties:
        requestId:
          type: string
          format: uuid
        timestamp:
          type: string
          format: date-time

    Pagination:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
          default: 1
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        total:
          type: integer
        totalPages:
          type: integer

    Project:
      type: object
      required:
        - projectId
        - name
        - ownerId
        - createdAt
        - updatedAt
      properties:
        projectId:
          type: string
          description: Unique project identifier
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          maxLength: 5000
        ownerId:
          type: string
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
          default: '#3b82f6'
        isPublic:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        members:
          type: array
          items:
            $ref: '#/components/schemas/ProjectMember'
        pendingRequests:
          type: array
          items:
            type: object

    ProjectMember:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
          format: email
        avatar:
          type: string
          format: uri
        role:
          type: string
          enum: [owner, member]

    Card:
      type: object
      required:
        - id
        - title
        - columnId
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          maxLength: 5000
        priority:
          type: string
          enum: [low, medium, high, urgent]
        assignees:
          type: array
          items:
            type: string
        labels:
          type: array
          items:
            type: string
        columnId:
          type: string
        dueDate:
          type: string
          format: date-time
        tags:
          type: array
          items:
            type: string
        position:
          type: integer
          minimum: 0
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Organization:
      type: object
      required:
        - id
        - name
        - slug
        - plan
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
        name:
          type: string
          minLength: 1
          maxLength: 255
        slug:
          type: string
          pattern: '^[a-z0-9-]+$'
          minLength: 3
          maxLength: 50
        description:
          type: string
          maxLength: 5000
        plan:
          type: string
          enum: [free, pro, enterprise]
          default: free
        settings:
          type: object
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ApiKey:
      type: object
      required:
        - id
        - name
        - keyPrefix
        - scopes
        - isActive
        - createdAt
      properties:
        id:
          type: string
        name:
          type: string
        keyPrefix:
          type: string
          description: First 12 characters of the API key for identification
        scopes:
          type: string
          description: Comma-separated scopes (e.g., "read,write")
        isActive:
          type: boolean
        lastUsedAt:
          type: string
          format: date-time
        usageCount:
          type: integer
        createdAt:
          type: string
          format: date-time
        expiresAt:
          type: string
          format: date-time

    Milestone:
      type: object
      required:
        - id
        - name
        - dueDate
      properties:
        id:
          type: string
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        dueDate:
          type: string
          format: date
          description: Due date in YYYY-MM-DD format

    Label:
      type: object
      required:
        - id
        - name
        - color
      properties:
        id:
          type: string
        name:
          type: string
          minLength: 1
          maxLength: 50
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'

    Column:
      type: object
      required:
        - id
        - title
      properties:
        id:
          type: string
        title:
          type: string
          minLength: 1
          maxLength: 100
        wipLimit:
          type: integer
          minimum: 0
          description: Work-in-progress limit for this column

    UserSearchResult:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
          format: email
        name:
          type: string
        avatar:
          type: string
          format: uri

security:
  - ApiKeyAuth: []
  - SessionAuth: []

paths:
  /projects:
    get:
      tags:
        - Projects
      summary: 프로젝트 목록 조회
      description: |
        인증된 사용자가 접근 가능한 프로젝트 목록을 조회합니다.

        **접근 가능한 프로젝트:**
        - 사용자가 소유한 프로젝트
        - 사용자가 멤버로 참여 중인 프로젝트
        - 공개(isPublic=true) 프로젝트

        **필터링 옵션:**
        - organizationId: 특정 조직의 프로젝트만 조회
        - isPublic: 공개 프로젝트만 조회
        - search: 프로젝트 이름으로 검색

        **페이지네이션:**
        - page: 조회할 페이지 번호 (기본값: 1)
        - pageSize: 페이지당 항목 수 (기본값: 20, 최대: 100)
      parameters:
        - name: page
          in: query
          description: 페이지 번호 (1부터 시작)
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: pageSize
          in: query
          description: 페이지당 프로젝트 수
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: organizationId
          in: query
          description: 필터링할 조직 ID
          schema:
            type: string
        - name: isPublic
          in: query
          description: 공개 프로젝트만 조회 (true/false)
          schema:
            type: boolean
        - name: search
          in: query
          description: 프로젝트 이름 검색어
          schema:
            type: string
      responses:
        '200':
          description: 프로젝트 목록 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Project'
                  meta:
                    allOf:
                      - $ref: '#/components/schemas/Meta'
                      - $ref: '#/components/schemas/Pagination'
        '401':
          description: 인증 실패 - API 키 또는 세션이 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - Projects
      summary: 새 프로젝트 생성
      description: |
        새로운 프로젝트를 생성합니다.

        **생성 시 자동으로 포함되는 항목:**
        - 기본 컬럼 4개 (To Do, In Progress, Review, Done)
        - 프로젝트 소유자가 자동으로 멤버로 추가됨
        - 고유한 프로젝트 ID 생성

        **프로젝트 색상:**
        - color 필드는 HEX 색상 코드 (#RRGGBB 형식)
        - 기본값: #3b82f6 (파란색)

        **공개 설정:**
        - isPublic이 true인 경우 모든 사용자가 조회 가능
        - false인 경우 소유자와 멤버만 접근 가능
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 255
                  description: 프로젝트 이름 (1-255자)
                description:
                  type: string
                  maxLength: 5000
                  description: 프로젝트 설명 (최대 5000자)
                color:
                  type: string
                  pattern: '^#[0-9A-Fa-f]{6}$'
                  description: 프로젝트 색상 (HEX 코드)
                isPublic:
                  type: boolean
                  description: 공개 프로젝트 여부
            example:
              name: "웹사이트 리뉴얼 프로젝트"
              description: "2025년 상반기 웹사이트 전면 리뉴얼"
              color: "#3b82f6"
              isPublic: false
      responses:
        '201':
          description: 프로젝트 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Project'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '400':
          description: 입력 데이터 검증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{projectId}:
    get:
      tags:
        - Projects
      summary: Get project
      description: Get a single project by ID
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Project'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '404':
          description: Project not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    patch:
      tags:
        - Projects
      summary: Update project
      description: Update project details
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 255
                description:
                  type: string
                  maxLength: 5000
                color:
                  type: string
                  pattern: '^#[0-9A-Fa-f]{6}$'
                isPublic:
                  type: boolean
      responses:
        '200':
          description: Project updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Project'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /cards:
    get:
      tags:
        - Cards
      summary: 카드 목록 조회
      description: |
        프로젝트의 카드(작업 항목) 목록을 조회합니다.

        **필수 파라미터:**
        - projectId: 카드를 조회할 프로젝트 ID

        **필터링 옵션:**
        - columnId: 특정 컬럼의 카드만 조회
        - priority: 우선순위로 필터링 (low, medium, high, urgent)
        - assignee: 특정 담당자에게 할당된 카드만 조회
        - search: 카드 제목 또는 설명에서 검색

        **응답 데이터:**
        - 카드 제목, 설명, 우선순위, 담당자, 라벨, 마일스톤 등 포함
        - 생성일시와 수정일시 정보 제공
      parameters:
        - name: projectId
          in: query
          required: true
          description: 프로젝트 ID (필수)
          schema:
            type: string
        - name: columnId
          in: query
          description: 컬럼 ID로 필터링
          schema:
            type: string
        - name: priority
          in: query
          description: 우선순위로 필터링
          schema:
            type: string
            enum: [low, medium, high, urgent]
        - name: assignee
          in: query
          description: 담당자 ID로 필터링
          schema:
            type: string
        - name: search
          in: query
          description: 제목/설명 검색어
          schema:
            type: string
      responses:
        '200':
          description: 카드 목록 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Card'
                  meta:
                    $ref: '#/components/schemas/Meta'

    post:
      tags:
        - Cards
      summary: 새 카드 생성
      description: |
        새로운 카드(작업 항목)를 생성합니다.

        **필수 필드:**
        - projectId: 카드가 속할 프로젝트 ID
        - columnId: 카드가 추가될 컬럼 ID
        - title: 카드 제목 (1-255자)

        **선택 필드:**
        - description: 상세 설명 (마크다운 지원, 최대 5000자)
        - priority: 우선순위 (low/medium/high/urgent)
        - assignees: 담당자 ID 배열
        - labels: 라벨 ID 배열
        - dueDate: 마감일 (ISO 8601 형식)
        - tags: 태그 배열

        **생성 후:**
        - 카드는 지정된 컬럼의 맨 아래에 추가됩니다
        - 고유한 카드 ID가 자동 생성됩니다
        - WebSocket을 통해 실시간으로 다른 사용자에게 알림
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - projectId
                - columnId
                - title
              properties:
                projectId:
                  type: string
                  description: 프로젝트 ID
                columnId:
                  type: string
                  description: 컬럼 ID
                title:
                  type: string
                  minLength: 1
                  maxLength: 255
                  description: 카드 제목
                description:
                  type: string
                  maxLength: 5000
                  description: 카드 설명 (마크다운 지원)
                priority:
                  type: string
                  enum: [low, medium, high, urgent]
                  description: 우선순위
                assignees:
                  type: array
                  items:
                    type: string
                  description: 담당자 ID 배열
                labels:
                  type: array
                  items:
                    type: string
                  description: 라벨 ID 배열
                dueDate:
                  type: string
                  format: date-time
                  description: 마감일 (ISO 8601)
                tags:
                  type: array
                  items:
                    type: string
                  description: 태그 배열
            example:
              projectId: "project-123"
              columnId: "col-todo"
              title: "API 문서 작성"
              description: "OpenAPI 명세서와 Swagger UI 구현"
              priority: "high"
              assignees: ["user-1", "user-2"]
              labels: ["label-dev"]
              dueDate: "2025-12-31T23:59:59Z"
      responses:
        '201':
          description: 카드 생성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Card'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /cards/{cardId}:
    get:
      tags:
        - Cards
      summary: Get card
      description: Get a single card by ID
      parameters:
        - name: cardId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Card'
                  meta:
                    $ref: '#/components/schemas/Meta'

    patch:
      tags:
        - Cards
      summary: Update card
      description: Update card details
      parameters:
        - name: cardId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                priority:
                  type: string
                  enum: [low, medium, high, urgent]
                assignees:
                  type: array
                  items:
                    type: string
                labels:
                  type: array
                  items:
                    type: string
                dueDate:
                  type: string
                  format: date-time
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Card updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Card'
                  meta:
                    $ref: '#/components/schemas/Meta'

    delete:
      tags:
        - Cards
      summary: Delete card
      description: Delete a card
      parameters:
        - name: cardId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Card deleted successfully

  /cards/{cardId}/move:
    post:
      tags:
        - Cards
      summary: Move card
      description: Move a card to a different column and/or position
      parameters:
        - name: cardId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - columnId
              properties:
                columnId:
                  type: string
                  description: Target column ID
                position:
                  type: integer
                  minimum: 0
                  description: Target position in the column (0-indexed)
            example:
              columnId: "board-test-project-1-in-progress"
              position: 0
      responses:
        '200':
          description: Card moved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Card'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /organizations:
    get:
      tags:
        - Organizations
      summary: List organizations
      description: Get organizations the authenticated user belongs to
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'
                  meta:
                    $ref: '#/components/schemas/Meta'

    post:
      tags:
        - Organizations
      summary: Create organization
      description: Create a new organization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 255
                slug:
                  type: string
                  pattern: '^[a-z0-9-]+$'
                  minLength: 3
                  maxLength: 50
                  description: Optional - will be auto-generated from name if not provided
                description:
                  type: string
                  maxLength: 5000
                plan:
                  type: string
                  enum: [free, pro, enterprise]
            example:
              name: "My Organization"
              description: "Organization description"
              plan: "free"
      responses:
        '201':
          description: Organization created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /organizations/{orgId}:
    get:
      tags:
        - Organizations
      summary: Get organization
      description: Get a single organization by ID
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
                  meta:
                    $ref: '#/components/schemas/Meta'

    patch:
      tags:
        - Organizations
      summary: Update organization
      description: Update organization details
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                plan:
                  type: string
                  enum: [free, pro, enterprise]
      responses:
        '200':
          description: Organization updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Organization'
                  meta:
                    $ref: '#/components/schemas/Meta'

    delete:
      tags:
        - Organizations
      summary: Delete organization
      description: Delete an organization (owner only)
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Organization deleted successfully

  /organizations/{orgId}/members:
    get:
      tags:
        - Organizations
      summary: List organization members
      description: Get list of members in an organization
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        userId:
                          type: string
                        userName:
                          type: string
                        userEmail:
                          type: string
                        role:
                          type: string
                          enum: [owner, admin, member]
                        joinedAt:
                          type: string
                          format: date-time
                  meta:
                    $ref: '#/components/schemas/Meta'

  /api-keys:
    get:
      tags:
        - API Keys
      summary: List API keys
      description: Get list of API keys for the authenticated user (requires session authentication)
      security:
        - SessionAuth: []
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApiKey'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          description: Unauthorized - Session authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{id}/milestones:
    post:
      tags:
        - Milestones
      summary: 마일스톤 생성
      description: |
        프로젝트의 새로운 마일스톤(목표 시점)을 생성합니다.

        **마일스톤이란?**
        - 프로젝트의 중요한 목표 달성 시점을 표시합니다
        - 여러 카드를 하나의 마일스톤에 연결할 수 있습니다
        - 진행률 추적과 일정 관리에 유용합니다

        **필수 필드:**
        - name: 마일스톤 이름 (예: "v1.0 출시", "베타 테스트")
        - dueDate: 목표 달성일 (YYYY-MM-DD 형식)

        **선택 필드:**
        - description: 마일스톤 상세 설명 (최대 500자)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - dueDate
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                  maxLength: 500
                dueDate:
                  type: string
                  format: date
                  description: Due date in YYYY-MM-DD format
            example:
              name: "Version 1.0 Release"
              description: "First major release"
              dueDate: "2025-12-31"
      responses:
        '201':
          description: Milestone created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Milestone'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /projects/{id}/milestones/{milestoneId}:
    patch:
      tags:
        - Milestones
      summary: Update milestone
      description: Update milestone details
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: milestoneId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                  maxLength: 500
                dueDate:
                  type: string
                  format: date
      responses:
        '200':
          description: Milestone updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  milestone:
                    $ref: '#/components/schemas/Milestone'
                  message:
                    type: string

    delete:
      tags:
        - Milestones
      summary: Delete milestone
      description: Delete a milestone
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: milestoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Milestone deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

  /projects/{id}/labels:
    post:
      tags:
        - Labels
      summary: 라벨 생성
      description: |
        프로젝트의 새로운 라벨을 생성합니다.

        **라벨이란?**
        - 카드를 분류하고 시각적으로 구분하기 위한 태그입니다
        - 각 라벨은 고유한 이름과 색상을 가집니다
        - 하나의 카드에 여러 라벨을 지정할 수 있습니다

        **필수 필드:**
        - name: 라벨 이름 (예: "버그", "긴급", "기능개발")
        - color: HEX 색상 코드 (#RRGGBB 형식)

        **색상 예시:**
        - #ef4444 (빨강) - 긴급, 버그
        - #f59e0b (주황) - 중요
        - #10b981 (초록) - 완료, 승인
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - color
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 50
                color:
                  type: string
                  pattern: '^#[0-9A-Fa-f]{6}$'
            example:
              name: "Bug"
              color: "#ef4444"
      responses:
        '201':
          description: Label created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Label'
                  meta:
                    $ref: '#/components/schemas/Meta'

  /projects/{id}/labels/{labelId}:
    patch:
      tags:
        - Labels
      summary: Update label
      description: Update label details
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: labelId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 50
                color:
                  type: string
                  pattern: '^#[0-9A-Fa-f]{6}$'
      responses:
        '200':
          description: Label updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  label:
                    $ref: '#/components/schemas/Label'
                  message:
                    type: string

    delete:
      tags:
        - Labels
      summary: Delete label
      description: Delete a label
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: labelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Label deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

  /projects/{id}/columns/{columnId}:
    patch:
      tags:
        - Columns
      summary: Update column
      description: Update column details (e.g., title, WIP limit)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: columnId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 100
                wipLimit:
                  type: integer
                  minimum: 0
      responses:
        '200':
          description: Column updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  column:
                    $ref: '#/components/schemas/Column'
                  message:
                    type: string

  /users/search:
    get:
      tags:
        - Users
      summary: 사용자 검색
      description: |
        이메일 또는 이름으로 사용자를 검색합니다.

        **검색 조건:**
        - 최소 2자 이상의 검색어 필요
        - 이메일과 이름에서 부분 일치 검색
        - 최대 10명의 결과 반환

        **사용 예시:**
        - 프로젝트 멤버 초대 시 사용자 찾기
        - 카드 담당자 지정 시 사용자 검색
        - 조직 멤버 추가 시 활용

        **주의사항:**
        - 본인은 검색 결과에서 제외됩니다
        - 인증된 사용자만 검색할 수 있습니다
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
            minLength: 2
          description: 검색어 (이메일 또는 이름, 최소 2자)
      responses:
        '200':
          description: 사용자 검색 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserSearchResult'
        '400':
          description: 검색어가 2자 미만인 경우
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{projectId}/members/invite:
    post:
      tags:
        - Projects
      summary: 프로젝트 멤버 직접 초대
      description: |
        사용자를 프로젝트 멤버로 직접 추가합니다 (프로젝트 소유자만 가능).

        **권한:**
        - 프로젝트 소유자만 사용 가능
        - 가입 요청 승인 과정 없이 즉시 멤버로 추가

        **멤버 역할:**
        - 자동으로 'member' 역할로 추가됩니다
        - 프로젝트 조회, 카드 생성/수정/삭제 권한 보유

        **주의사항:**
        - 이미 멤버인 사용자는 추가할 수 없습니다
        - 유효한 사용자 ID를 입력해야 합니다
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userId
              properties:
                userId:
                  type: string
            example:
              userId: "user-123"
      responses:
        '201':
          description: User invited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  member:
                    $ref: '#/components/schemas/ProjectMember'
        '403':
          description: Only project owner can invite members
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '400':
          description: User is already a member
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
